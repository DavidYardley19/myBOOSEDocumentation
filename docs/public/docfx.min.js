// Minimal script to populate the sidebar TOC using the generated toc.html
// This is a lightweight replacement for DocFX's runtime just to make the site usable on GitHub Pages.
(function () {
  function getMeta(name) {
    var el = document.querySelector('meta[name="' + name + '"]');
    return el && el.content;
  }

  function resolvePath(rel) {
    if (!rel) return 'toc.html';
    return rel;
  }

  function loadToc() {
    var tocRel = getMeta('docfx:tocrel') || 'toc.html';
    var path = resolvePath(tocRel);
    fetch(path, { cache: 'no-store' })
      .then(function (r) { return r.ok ? r.text() : Promise.reject(r.status); })
      .then(function (html) {
        var toc = document.getElementById('toc');
        if (!toc) return;
        toc.innerHTML = html;
        // Expand current page if present
        try {
          var url = location.pathname.split('/').pop();
          var links = toc.querySelectorAll('a[href]');
          links.forEach(function (a) {
            if (a.getAttribute('href') === url) {
              a.style.fontWeight = '600';
            }
          });
        } catch (_) { }
      })
      .catch(function () { /* silent */ });
  }

  document.addEventListener('DOMContentLoaded', loadToc);
})();
